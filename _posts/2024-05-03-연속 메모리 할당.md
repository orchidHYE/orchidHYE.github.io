---
layout: post
title: "[운영체제] 연속 메모리 할당"
date: 2024-05-03 22:28 +0900
categories:
  - CS
  - OS
tags: 
math: true
---
## 연속 메모리 할당
- 프로세스에 연속적인 메모리 공간을 할당

## 스와핑
![](https://i.imgur.com/k7Kqvhx.png)
- 현재 사용되지 않는 프로세스들을 보조기억장치의 일부 영역(스왑 영역)으로 쫒아내고
- 그렇게 생긴 빈 공간에 새 프로세스 적재

## 메모리 할당
- 프로세스는 메모리의 빈 공간에 할당되어야 한다.

>###### 빈 공간이 여러 개 일 때
>![](https://i.imgur.com/TuYsI8m.png)
>- 프로세스 A, B, C가 실행 중이고 빈 공간 A, B, C가 존재한다고 가정
>- 20MB 적재할 프로세스 존재
>- 연속 메모리 할당 방법에는 세가지 방법 존재
>- 최초 적합, 최적 적합, 최악 적합
>- 각각의 방법에 대해 자세히 알아보자

<br/>

## 최초 적합
![](https://i.imgur.com/1NIztvf.png)
- first-fit
- 운영체제가 메모리 내의 빈 공간을 순서대로 검색하다 적재할 수 있는 공간을 발견하면 그 공간에 프로세스를 배치하는 방식
- 검색 최소화, 빠른 할당 

## 최적 적합
![](https://i.imgur.com/E88Mxyi.png)
- best-fit
- 운영체제가 빈 공간을 모두 검색해본 뒤, 적재 가능한 가장 작은 공간에 할당

## 최악 적합
![](https://i.imgur.com/fhtCeLc.png)
- worst-fit
- 운영체제가 빈 공간을 모두 검색해본 뒤, 적재 가능한 가장 큰 공간에 할당

###### 하지만,
###### 프로세스를 연속적으로 메모리에 할당하는 방식은 메모리를 효율적으로 사용하는 방법이 아니다.
###### 외부 단편화(external fragmentation)라는 문제가 발생하기 때문이다.

## 외부 단편화
- 프로세스들이 실행되고 종료되길 반복하며 메모리 사이 사이에 빈 공간 발생
- 위와 같은 과정에서, 프로세스를 할당하기 어려울 만큼 작은 메모리 공간들로 인해 메모리가 낭비되는 현상

>###### 사용자 영역이 200MB일 때,
>- 프로세스 A (50MB)
>- 프로세스 B (30MB)
>- 프로세스 C (100MB)
>- 프로세스 D (20MB)
>###### 이 프로세스들을 차례대로 적재해야 한다고 가정.
>###### 메모리 크기가 딱 맞아떨어지게 적재되었다고 가정.
>![](https://i.imgur.com/G5WN9uW.png)
>###### 프로세스 B, D 실행 끝, 총 남은 공간은 50MB
>![](https://i.imgur.com/tyFbDYF.png)
>###### 그렇다면 이 때, 50MB의 프로세스를 적재할 수 있는가?
>###### 아니다.
>###### 각각 30MB, 20MB이기 때문에 적재할 수 없다.
>###### 이런 현상을 `외부 단편화`라고 한다.

<br/>

## 외부 단편화 해결 방법
#### 메모리 압축 (compaction)
![](https://i.imgur.com/PMf8mbw.png)
- 여기저기 흩어져 있는 빈 공간들을 하나로 모으는 방식
- 프로세스를 적당히 재배치시켜 흩어져 있는 작은 빈 공간들을 하나의 큰 빈 공간으로 만든다.
