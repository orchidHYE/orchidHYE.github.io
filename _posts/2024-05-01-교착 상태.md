---
layout: post
title: "[운영체제] 교착 상태"
date: 2024-05-01 22:01 +0900
categories:
  - CS
  - OS
tags: 
math: true
---
## 교착 상태
![](https://i.imgur.com/Dzm9R4o.png)

-	일어나지 않을 사건을 기다리며 진행이 멈춰 버리는 현상
 

###### 교착 상태를 해결하기 위해서는
	1.	교착 상태가 발생했을 때의 상황을 정확히 표현해보기
	2.	교착 상태가 일어나는 근본적인 이유 이해하기

## 교착 상태 정확히 표현해보기
###### `자원 할당 그래프`로 교착 상태 발생 조건 파악이 가능하다.
-	어떤 프로세스가 어떤 자원을 할당 받아 사용 중인지 확인 가능
-	어떤 프로세스가 어떤 자원을 기다리고 있는지 확인 가능

> ###### 자원 할당 그래프 
 >![](https://i.imgur.com/UobbKRD.png)
>-	프로세스는 원으로 표현
>- 자원의 종류는 사각형으로 표현
 >![](https://i.imgur.com/UOtXsov.png)
>- 사용할 수 있는 자원의 개수는 자원 사각형 내에 점으로 표현
 >![](https://i.imgur.com/lXERMTM.png)
>- 프로세스가 어떤 자원을 할당 받아 사용 중이라면, 자원에서 프로세스를 향해 화살표 표시
 ![](https://i.imgur.com/jT9NqHJ.png)
>- 프로세스가 어떤 자원을 기다리고 있다면 프로세스에서 자원으로 화살표 표시
>
><br/>
><br/>
>
>![](https://i.imgur.com/9ZymEGW.png)
>###### 교착 상태가 일어난 자원 할당 그래프는 원의 형태를 띄고 있다.
 
<br/>

###### 교착 상태가 일어나는 근본적인 이유를 알아보자

> ###### 교착 상태가 발생하는 조건
>1.	상호 배제
>	- 한 프로세스가 사용하는 자원울 다른 프로세수가 사용할 수 없는 상태
>2.	점유와 대기
>	- 자원을 할당 받은 상태에서 다른 자원을 할당 받기를 기다리는 상태
>3.	비선점
>	- 어떤 프로세스도 다른 프로세스의 자원을 강제로 빼앗지 못하는 상태
>4.	원형 대기
>	- 프로세스들이 원의 형태로 자원을 대기하는 상태
>###### 위 네 가지 조건 중 하나라도 만족하지 않으면 교착 상태 발생 X
>###### 위 네 가지 조건을 모두 만족하면 교착 상태 발생 가능

<br/>

## 교착 상태 예방
- 애초에 교착 상태가 발생하지 않도록
	- 교착 상태 발생 조건 (상호 배제, 점유와 대기, 비선점, 원형 대기)중 하나를 없애기
	→ 교착 상태가 발생하지 않음은 보장할 수 있으나 부작용이 따른다.

## 교착 상태 회피
-  교착 상태를 무분별한 자원 할당으로 인해 발생했다고 간주
- 교착 상태가 발생하지 않을 만큰 조심 조심 할당하기
- 배분할 수 있는 자원의 양을 고려하여 교착 상태가 발생하지 않을 만큼만 자원 배분

>- 안전 순서열
>	- 교착 상태 없이 안전하게 프로세스들에 자원을 할당할 수 있는 순서
>- 안전 상태
>	- 교착 상태 없이 모든 프로세스가 자원을 할당 받고 종료될 수 있는 상태
>	- 안전 순서열이 있는 상태
>- 불안전 상태
>	- 교착 상태가 발생할 수도 있는 상태
>	- 안전 순서열이 없는 상태

## 교착 상태 검출 후 회복
- 교착 상태의 발생을 인정하고 사후에 조치하는 방식
- 프로세스가 자원을 요구하면 일단 할당, 교착 상태가 검출되면 회복
- 선점을 통한 회복, 프로세스 강제 종료를 통한 회복

###### 선점을 통한 회복
- 교착 상태가 해결될 때까지 한 프로세스씩 자원을 몰아주는 방식

###### 프로세스 강제 종료를 통한 회복
- 교착 상태에 놓인 프로세스 모두 강제 종료 (→ 작업 내역을 잃을 위험)
- 교착 상태가 해결될 때까지 한 프로세스씩 강제 종료 (→ 오버헤드)
 

