---
layout: post
title: "[컴퓨터 구조] 캐시 메모리"
date: 2024-04-16 22:57 +0900
categories:
  - CS
  - Architecture
tags: 
math: true
---

## **들어가기 전**

>CPU가 메모리에 접근하는 시간은 CPU 연산 속도보다 느리다.<br/>
>##### **저장 장치 계층 구조** (memory hierarchy)
>![](https://i.imgur.com/m9V6khA.png)
>- CPU와 가까운 저장 장치는 빠르고, 멀리 있는 저장 장치는 느리다.
>- 속도가 빠른 저장 장치는 저장 용량이 작고 가격이 비싸다.<br/>
>
`* 저장 장치들은 'CPU에 얼마나 가까운가'를 기준으로 계층적으로 나타낼 수 있음`

## **캐시 메모리**
- **CPU의 연산 속도와 메모리 접근 속도의 차이를 줄이기 위한 저장 장치**
- 레지스터보다 용량이 크고 메모리보다 빠른 SRAM 기반의 저장 장치
- CPU와 메모리 사이에 위치
- 계층 구조로 표현시 레지스터와 메모리 사이에 위치
- "CPU가 매번 메모리에 왔다 갔다 하는 건 시간이 오래 걸리니, 메모리에서 CPU가 사용할 일부 데이터를 미리 캐시 메모리로 가지고 와서 쓰자."

#### **계층적 캐시 메모리**
- 캐시 메모리는 CPU 내부 혹은 외부에 위치
- 일반적으로 L1 캐시와 L2 캐시는 코어 내부에, L3 캐시는 코어 외부에 위치
![](https://i.imgur.com/3AR9d95.png)


>**멀티코어 프로세서의 캐시 메모리**
>![](https://i.imgur.com/B4wsxoP.png) <br/>
>
  **분리형 캐시**
>![](https://i.imgur.com/z0WIj4k.png)
>- L1D:  데이터만을 담고 있는 캐시
>- L1I: 명령어만을 담고 있는 캐시
>
> **계층적 캐시 메모리를 반영한 저장 장치의 계층 구조**
>![](https://i.imgur.com/oBQo31P.png)
>`* 해당 학습 내용에서 나온 저장 장치들만을 반영한 계층 구조이다.`

<br/>

- 캐시 메모리는 메모리보다 용량이 적다.
- 메모리의 모든 내용을 저장할 수 없다.

##### **그렇다면 뭘 저장하는가.**
CPU가 자주 사용할 법한 내용을 **예측**하여 저장

## **캐시 적중 (cache hit)**
- CPU가 캐시 메모리에 저장된 값을 활용할 경우
![](https://i.imgur.com/1svGlAC.png)


## **캐시 실패 (cache miss)**
- 예측이 틀린 경우, CPU가 메모리에 접근해야 하는 경우
![](https://i.imgur.com/3DHDuNc.png)

#### **캐시 적중률**
>캐시 히트 횟수 / (캐시 히트 횟수 + 캐시 미스 횟수)
 `* 캐시 적중률을 높여야 한다. == CPU가 사용할 법한 데이터를 잘 예측해야 한다.`

<br/>
## 참조 지역성의 원리
- CPU가 사용할 법한 데이터를 예측하는 방법
- CPU가 메모리에 접근할 때의 주된 경향을 바
- 탕으로 만들어진 원리
	- CPU는 최근에 접근했던 메모리 공간에 다시 접근하려는 경향이 있다.
	- CPU는 접근한 메모리 공간 근처를 접근하려는 경향이 있다. 이를 **공간 지역성**이라고 한다.
	- ![](https://i.imgur.com/Ae0ZwEy.png)

